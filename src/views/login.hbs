<h1>Iniciar Sesión</h1>

<form id="loginForm">
    <input type="email" name="email" placeholder="Email" autocomplete="off" required>
    <input type="password" name="password" placeholder="Contraseña" required>
    <button type="submit">Iniciar Sesión</button>
</form>

<div class="nav">
    <a href="/register">Registrarse</a>
</div>

<script>
    document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData);
        console.log(data);
        fetch('/api/sessions/login', {
            method: 'POST',
            body: JSON.stringify(data),
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(response => response.json()).then(data => {
            console.log(data); // Imprimimos el resultado en la consola.
            if (data.status === 'success') {
                window.location.href = '/login';
            } else {
                console.error('Error:', data.message); // Imprimimos el error en la consola.
                alert(data.message); // Mostramos el mensaje de error en una alerta.
            }
        }).catch(error => {
            console.error('Error:', error); // Imprimimos el error en la consola.
            alert(error.message); // Mostramos un mensaje de error en una alerta.
        });
    });
</script>